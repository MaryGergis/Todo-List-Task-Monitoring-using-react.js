{"version":3,"file":"static/js/177.35c73ba0.chunk.js","mappings":"sOAuKA,QA9JA,WACE,MAAMA,GAAWC,EAAAA,EAAAA,OACX,QAAEC,IAAYC,EAAAA,EAAAA,YAAWC,EAAAA,GACzBC,GAAWC,EAAAA,EAAAA,QAAO,OAClB,YAAEC,IAAgBJ,EAAAA,EAAAA,YAAWK,EAAAA,IAE5BC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,CAC/BC,MAAO,GACPC,YAAa,GACbC,SAAU,GACVC,MAAO,OAGHC,EAAgBC,IACpB,MAAM,KAAEC,EAAI,MAAEC,GAAUF,EAAEG,OAC1BV,GAASW,IAAI,IACRA,EACH,CAACH,GAAOC,KACP,GAsCLG,EAAAA,EAAAA,YAAU,KAAO,IAADC,EACE,QAAhBA,EAAAlB,EAASmB,eAAO,IAAAD,GAAhBA,EAAkBE,OAAO,GACxB,IAEH,MAeMC,EAA6BA,KACjCC,EAAAA,GAAMC,MAAM,0BACZ5B,EAAS,eAAe,EAG1B,OACE6B,EAAAA,EAAAA,MAAA,OAAKC,MAAO,CAAEC,UAAW,KAAOC,aAAc,QAAUC,UAAU,iCAAgCC,SAAA,EAChGC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,8BAA6BC,SAAC,uBAC5CL,EAAAA,EAAAA,MAAA,QAAMO,SA9DYnB,IAGpB,GAFAA,EAAEoB,iBAEG9B,EAEE,CACP,MAAM+B,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAAS/B,EAAKG,OAC9B0B,EAASE,OAAO,cAAe/B,EAAKI,aACpCyB,EAASE,OAAO,WAAY/B,EAAKK,UACjCwB,EAASE,OAAO,QAAS/B,EAAKM,OAE9B,MAAM0B,EAAW,CACf7B,MAAOH,EAAKG,MACZC,YAAaJ,EAAKI,YAClBC,SAAUL,EAAKK,SACfC,MAAON,EAAKM,OAGdb,EAAQuC,GACLC,MAAK,KACJhC,EAAQ,CACNE,MAAO,GACPC,YAAa,GACbC,SAAU,GACVC,MAAO,OAETf,EAAS,SAAS,IAEnB2C,OAAOf,IACNgB,QAAQhB,MAAMA,EAAM,GAExB,MA5BEF,GA4BF,EA8BgCO,UAAU,WAAUC,SAAA,EAChDL,EAAAA,EAAAA,MAAA,OAAKI,UAAU,aAAYC,SAAA,EACzBL,EAAAA,EAAAA,MAAA,OAAKI,UAAU,eAAcC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,SAAOU,QAAQ,QAAOX,SAAC,iBAAoB,KAACC,EAAAA,EAAAA,KAAA,UAC1CA,EAAAA,EAAAA,KAAA,SACEW,KAAK,OACLb,UAAU,eACVc,GAAG,QACH7B,KAAK,QACLC,MAAOV,EAAKG,MACZoC,SAAUhC,EACViC,IAAK5C,EACL6C,UAAQ,QAIZrB,EAAAA,EAAAA,MAAA,OAAKI,UAAU,QAAOC,SAAA,EACpBC,EAAAA,EAAAA,KAAA,SAAOU,QAAQ,WAAUX,SAAC,iBAC1BC,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,SACEW,KAAK,OACLb,UAAU,eACVc,GAAG,WACH7B,KAAK,WACLC,MAAOV,EAAKK,SACZkC,SAAUhC,EAEVkC,UAAQ,WAKdrB,EAAAA,EAAAA,MAAA,OAAKI,UAAU,aAAYC,SAAA,EACzBL,EAAAA,EAAAA,MAAA,OAAKI,UAAU,UAASC,SAAA,EACtBC,EAAAA,EAAAA,KAAA,SAAOU,QAAQ,cAAaX,SAAC,oBAC7BC,EAAAA,EAAAA,KAAA,YACEF,UAAU,gBACVc,GAAG,cACH7B,KAAK,cAAciC,KAAM,GAAIC,KAAM,GACnCjC,MAAOV,EAAKI,YACZmC,SAAUhC,QAIdmB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,SAAQC,UACrBL,EAAAA,EAAAA,MAAA,OAAKI,UAAWH,EAAAA,EAAMuB,YAAYnB,SAAA,EAChCC,EAAAA,EAAAA,KAAA,OAAKmB,IAAKC,EAAAA,EAAWtB,UAAU,aAAauB,IAAI,GAAGT,GAAG,kBAAmBU,MAAO,WAChFtB,EAAAA,EAAAA,KAAA,OAAKmB,IAAK7C,EAAKM,MAAOkB,UAAU,mBAAmBuB,IAAI,GAAGT,GAAG,kBAAmBU,MAAO,QAAU3B,MAAO,CAAC4B,SAAS,WAAYC,KAAK,MAAOC,IAAI,UAC9IzB,EAAAA,EAAAA,KAAA,SACEW,KAAK,OAAOe,QAAM,EAClB5B,UAAU,eACVc,GAAG,QACH7B,KAAK,QACL8B,SA5Ea/B,IACzB,MAAM6C,EAAO7C,EAAEG,OAAO2C,MAAM,GAC5B,GAAID,EAAM,CACR,MAAME,EAAS,IAAIC,WACnBD,EAAOE,OAAUjD,IACf,MAAMkD,EAAclD,EAAEG,OAAOgD,OAC7B1D,GAASW,IAAI,IACRA,EACHN,MAAOoD,KACN,EAELH,EAAOK,cAAcP,EACvB,MAkEUjC,EAAAA,EAAAA,MAAA,SAAOgB,QAAQ,QAAOX,SAAA,EACpBC,EAAAA,EAAAA,KAAA,OAAKmC,MAAM,6BAA6Bb,MAAM,KAAKc,OAAO,KAAKC,KAAK,eAAevC,UAAU,4BAA4BwC,QAAQ,YAAWvC,UAC1IC,EAAAA,EAAAA,KAAA,QAAMuC,EAAE,0VACJ,KAACvC,EAAAA,EAAAA,KAAA,SAAM,2BAOrBA,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC/BC,EAAAA,EAAAA,KAAA,UAAQF,UAAU,6CAA6CH,MAAO,CAAC6C,OAAO,GAAGzC,SAAC,oBAO5F,C","sources":["Components/CRUD/AddTask.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {  toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport TasksContext from \"../../ContextApis/TasksContext\";\r\nimport { UsersContext } from \"../../ContextApis/UsersContext\";\r\nimport style from \"../../Styles/AddTask.module.css\";\r\nimport imgUpload from \"../../Images/imgUpload.svg\";\r\n\r\nfunction AddTask() {\r\n  const navigate = useNavigate();\r\n  const { addTask } = useContext(TasksContext);\r\n  const inputRef = useRef(null);\r\n  const { CurrentUser } = useContext(UsersContext);\r\n\r\n  const [task, setTask] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    deadline: \"\",\r\n    image: null, \r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setTask((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n  \r\n    if (!CurrentUser) {\r\n      showSignInToastAndRedirect();\r\n    } else {\r\n    const formData = new FormData();\r\n    formData.append(\"title\", task.title);\r\n    formData.append(\"description\", task.description);\r\n    formData.append(\"deadline\", task.deadline);\r\n    formData.append(\"image\", task.image);\r\n   \r\n    const taskData = {\r\n      title: task.title,\r\n      description: task.description,\r\n      deadline: task.deadline,\r\n      image: task.image, // Store the base64 image string\r\n    };\r\n  \r\n    addTask(taskData) \r\n      .then(() => {\r\n        setTask({\r\n          title: \"\",\r\n          description: \"\",\r\n          deadline: \"\",\r\n          image: null, // Reset the image\r\n        });\r\n        navigate(\"/Tasks\");\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    inputRef.current?.focus();\r\n  }, []);\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const base64Image = e.target.result;\r\n        setTask((prev) => ({\r\n          ...prev,\r\n          image: base64Image,\r\n        }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n  \r\n  const showSignInToastAndRedirect = () => {\r\n    toast.error('You must sign in first');\r\n    navigate('/User/signin'); \r\n  };\r\n\r\n  return (\r\n    <div style={{ marginTop: \"9%\",  borderRadius: \"25px\" }} className=\"container card text-black w-50\">\r\n      <h3 className=\"text-center text-dark  pt-3\"> Create new Task </h3>\r\n      <form onSubmit={handleSubmit} className=\"form p-3\">\r\n        <div className=\"row d-flex\">\r\n          <div className=\" mb-3 w-50  \">\r\n          <label htmlFor=\"title\"> Task Name: </label> <br />\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"title\"\r\n              name=\"title\"\r\n              value={task.title}\r\n              onChange={handleChange}\r\n              ref={inputRef}\r\n              required\r\n            /> \r\n          </div>\r\n\r\n          <div className=\"col-6\">\r\n            <label htmlFor=\"deadline\"> Deadline: </label>\r\n            <br />\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              id=\"deadline\"\r\n              name=\"deadline\"\r\n              value={task.deadline}\r\n              onChange={handleChange}   \r\n\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row d-flex\">\r\n          <div className=\"col-6  \">\r\n            <label htmlFor=\"description\"> Description: </label>\r\n            <textarea \r\n              className=\"form-control \"\r\n              id=\"description\"\r\n              name=\"description\" rows={10} cols={60}\r\n              value={task.description}\r\n              onChange={handleChange} \r\n            /> \r\n          </div>\r\n\r\n          <div className=\"col-6 \">\r\n            <div className={style.uploadField} >\r\n              <img src={imgUpload} className=\"img-fluid \" alt=\"\" id=\"img-placeholder\"  width={'450px'} />\r\n              <img src={task.image} className=\"img-fluid h-auto\" alt=\"\" id=\"img-placeholder\"  width={'250px'}  style={{position:'absolute', left:'15%', top:'15%'}}/>\r\n              <input\r\n                type=\"file\" hidden\r\n                className=\"form-control\"\r\n                id=\"image\"\r\n                name=\"image\"\r\n                onChange={handleImageChange}\r\n              />\r\n              <label htmlFor=\"image\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" fill=\"currentColor\" className=\"bi bi-cloud-arrow-up-fill\" viewBox=\"0 0 16 16\">\r\n                  <path d=\"M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z\"/>\r\n                </svg> <br />\r\n                  Upload Image\r\n              </label>   \r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-center mt-3\">\r\n          <button className=\"btn btn-dark mx-2 text-light px-5 py-2 b-0\" style={{zIndex:1}}>\r\n            Add Task\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddTask;\r\n"],"names":["navigate","useNavigate","addTask","useContext","TasksContext","inputRef","useRef","CurrentUser","UsersContext","task","setTask","useState","title","description","deadline","image","handleChange","e","name","value","target","prev","useEffect","_inputRef$current","current","focus","showSignInToastAndRedirect","toast","error","_jsxs","style","marginTop","borderRadius","className","children","_jsx","onSubmit","preventDefault","formData","FormData","append","taskData","then","catch","console","htmlFor","type","id","onChange","ref","required","rows","cols","uploadField","src","imgUpload","alt","width","position","left","top","hidden","file","files","reader","FileReader","onload","base64Image","result","readAsDataURL","xmlns","height","fill","viewBox","d","zIndex"],"sourceRoot":""}